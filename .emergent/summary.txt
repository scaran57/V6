<analysis>
The AI engineer iteratively developed a score prediction application, moving from basic OCR and prediction to a robust, feature-rich system. Initial efforts focused on improving OCR accuracy and integrating a sophisticated prediction algorithm. Key developments included an adaptive learning mechanism, team-based learning, and odds weighting, all leading to a confidence score and top-3 predictions displayed in the UI.

Subsequent work centered on enhancing the UI with match and bookmaker information, which involved several refinements to the OCR logic to accurately extract and format this data. A significant phase addressed the fragility of learning data by implementing a secure, atomic, and append-only learning system to ensure data integrity and traceability. This included a reconstruction script. Most recently, the engineer added diagnostics and the ability to control and clear an analysis cache, and was in the process of integrating these cache controls into a new frontend component with routing.
</analysis>

<product_requirements>
The core product is a score prediction application for bookmaker images, aiming for robust OCR across diverse formats, filtering extraneous data, and integrating a dynamic prediction algorithm. It requires an adaptive learning mechanism ( with 60/40 weighted average) and system stability. Recent advancements added team-based learning, odds weighting, and a final confidence score with top-3 predictions, all to be displayed clearly on the frontend, including interpretation and recommendations.

User requests evolved to include:
1.  Displaying match names and bookmaker information in the UI, positioned near the Top 3 Scores, in a clean and lightweight manner. This was refined to specifically extract *real team names* (excluding UI elements) and format them with a dash (e.g., Team A - Team B).
2.  Addressing the observed discrepancy in the number of learning matches (10 found vs. >20 expected). This led to a requirement for a secured, atomic learning system with an append-only log to preserve history, prevent data corruption, and provide reconstruction capabilities.
3.  Implementing a  endpoint and allowing users to deactivate the analysis cache for testing purposes, ensuring a full OCR odds reload before calculation, and providing a UI to control these features.
</product_requirements>

<key_technical_concepts>
- **FastAPI & React:** Backend API and frontend UI.
- **PyTesseract & OpenCV:** OCR and image preprocessing.
- **Adaptive Learning:**  adjustment (60/40 weighted average).
- **Team-based Learning:** Historical team performance tracking.
- **Odds Weighting:** Probability refinement based on odds.
- **Atomic File Operations & Append-only Log:** Secure, traceable data management.
- **Analysis Cache:** Store/retrieve past analysis results.
</key_technical_concepts>

<code_architecture>
The application uses a FastAPI backend and a React frontend, managed by Docker and Supervisor.



-   
    -   **Importance**: Main FastAPI entry point, defining API routes.
    -   **Changes**: Integrated match/bookmaker extraction, analysis cache () with  parameter, and new endpoints for cache management, system reporting (), and diagnostics. Updated  to use  for secure learning events and  to read  from the new system.
-   
    -   **Importance**: Handles OCR from images.
    -   **Changes**: Heavily refined to robustly extract match names and bookmakers, including filtering UI elements and standardizing formatting (e.g., Team A - Team B).
-    (NEW)
    -   **Importance**: Implements a secure, atomic learning system with an append-only log (), managed updates for , and  (for  and schema version).
-    (NEW)
    -   **Importance**: Immutable, append-only log, serving as the definitive source of truth for all learning events.
-   
    -   **Importance**: Main React component for user interaction.
    -   **Changes**: Modified to display extracted  and  (with filtering for Bookmaker inconnu) near the Top 3 Scores.
-    (NEW)
    -   **Importance**: A new React component that provides a UI for analyzing images with a toggle to disable the analysis cache and a button to clear it.
-    (NEW) and  (NEW)
    -   **Importance**: Introduced to manage routing and encapsulate the new  for a separate test mode or advanced analysis interface.
</code_architecture>

<pending_tasks>
-   Complete the frontend integration of  by configuring  and  to make it accessible.
-   Create comprehensive documentation explaining how to use the different frontend modes (main application vs. test mode with cache control features).
</pending_tasks>

<current_work>
Immediately before this summary, the AI engineer was integrating the user-requested cache control features into the frontend. This involved creating a new React component, , which contains a switch to  during analysis and a button to . The backend API ( and ) was already updated to support these functionalities.

To avoid altering the existing  directly, the AI engineer decided to set up a new routing structure. This included creating a  component to potentially wrap the  and an  to manage navigation between different application modes or pages. The trajectory concludes with the AI having created these new files and planning to create documentation for them. The goal is to provide a dedicated section in the UI where users can explicitly control the analysis caching behavior for testing or specific use cases.
</current_work>

<optional_next_step>
Create documentation for  and , explaining how to access and utilize different application modes.
</optional_next_step>
